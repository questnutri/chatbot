<section class="qn-wrap" [class.dark]="dark">

  <img
  class="qn-logo-fixed"
  [src]="dark ? 'QuestColorInverseNutri_Logo_Vetorizada_Fundo-Transparente.png' : 'QuestNutri_Logo_Vetorizada_Fundo-Transparente.png'"
  alt="QuestNutri logo"
  />

  <button class="qn-theme-btn" (click)="toggleTheme()">
    <img
      [src]="dark ? 'light.png' : 'dark.png'"
      [alt]="dark ? 'Tema claro' : 'Tema escuro'"
      class="qn-theme-icon"
    />
  </button>

  <header class="qn-header">
    <div class="qn-brand">
      <div class="qn-titles"></div>
    </div>
  </header>

  <main class="qn-chat">
    <div class="qn-messages">
      <div *ngFor="let m of history" class="qn-msg" [class.qn-user]="m.from==='user'" [class.qn-bot]="m.from==='bot'">
        <div class="qn-bubble">
          {{ m.text }}
        </div>
        <span class="qn-meta">{{ m.at | date:'shortTime' }}</span>
      </div>

      <div *ngIf="loading" class="qn-typing">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      </div>

      <div *ngIf="error" class="qn-error">
        {{ error }}
      </div>
    </div>
  </main>

  <footer class="qn-inputbar">
    <form (submit)="onSend(); $event.preventDefault()" class="qn-form">
      <input
        [(ngModel)]="input"
        name="message"
        class="qn-input"
        type="text"
        placeholder="Pergunte algo de nutrição (ex.: café da manhã rico em fibras)…"
        autocomplete="off"
      />
      <button class="qn-send" type="submit" [disabled]="loading || !input.trim()">Enviar</button>
    </form>
    <small class="qn-disclaimer">
      Conteúdo educativo. Procure seu nutricionista para avaliação individual.
    </small>
  </footer>

</section>
